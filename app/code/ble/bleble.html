<!DOCTYPE html>
<html lang="pl">
<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
   <meta http-equiv="x-ua-compatible" content="ie=edge" />
   <title>BLE</title>  
   <meta name="HandheldFriendly" content="true">
   <meta name="mobile-web-app-capable" content="yes"> 
   <meta name="theme-color" content="#880">



<script>
/*
id: "GIejXOrBZQv8c8SxWxozjg=="
name: "ZL02D"
onadvertisementreceived
uuid: "0000180f-0000-1000-8000-00805f9b34fb"
*/

function log() {
	var line = Array.prototype.slice.call(arguments).map(function(argument) {
		return typeof argument === 'string' ? argument : JSON.stringify(argument);
	}).join(' ');
	console.log(line);
	document.querySelector('#log').textContent += line + '\n';
}
   
  async function getBattery(){
       navigator.bluetooth.requestDevice({ filters: [{ services: ['battery_service'] }] })
     .then(device => device.gatt.connect())
     .then(server => {
       // Getting Battery Serviceâ€¦
       return server.getPrimaryService('battery_service');
     })
     .then(service => {
       log(service)
       return service.getCharacteristic('battery_level');
     })
     .then(characteristic => {
        log(characteristic)
       return characteristic.readValue();
     })
     .then(value => {
       log(`Battery percentage is ${value.getUint8(0)}`);
     })
     .catch(error => { console.error(error); });
}
   
async function testBattery(){
     await getBattery();
}
  
</script>

</head>
<body>
      <button onclick="getBattery()">getBattery</button>
      <button onclick="testBattery()">testBattery</button>
<hr />
   <a href="https://developer.chrome.com/docs/capabilities/bluetooth?hl=pl">devBlue</a>
   <pre id="log"></pre>
</body>
</html>
