<html lang="pl"><head>
<meta charset="utf-8">
<title>#RADIO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="HandheldFriendly" content="true">
<meta name="mobile-web-app-capable" content="yes"> 
<meta name="theme-color" content="#214960">
  <link rel="shortcut icon" type="image/svg+xml" size="any" href="./img/radio.svg"> 
  <link rel="manifest" href="./radio.web.json">
  <link rel="stylesheet" type="text/css" href="../../css/dom.css" />
  <link rel="stylesheet" type="text/css" href="../../css/btn.css" />
  
<style>
  .one {background-color: linen; border:1px solid #ddd; padding:0.3em;;}
</style>

<script>
const _$=e=>document.querySelector(e);
const _$$=e=>document.querySelectorAll(e);

let IOThosty = {}
const usunRadio=(ten)=>{
  console.log(IOThosty);
}
const dodajRadio=(ten)=>{
  let dodaj = ten.parentNode.id;
  let url  =_$("#"+dodaj+" input#url").value;
  let name =_$("#"+dodaj+" input#name").value;
  if (!url || !name) return;
  if (!IOThosty[name]) IOThosty[name] = {};
  let uurl = url;
  let nname = name;
  IOThosty[name].name = nname;
  IOThosty[name].url  = uurl;
  console.log(IOThosty);
  localStorage.setItem("IOThosty", JSON.stringify(IOThosty));
  IOTview(IOThosty);
}

const IOTview=(IOThosty)=>{
  _$("#radios").innerHTML ="";
    for(let n in IOThosty){
      let r = IOThosty[n];
      let del = '<button onclick="usunRadio(this)" class="btn btn-warn btn-mini">[-]</button>';
      console.log(r);
      _$("#radios").innerHTML += `<div class="one"><a href="${r.url}" target="_blank">${r.name} - ${r.url}</a> ${del}</div>`;
    }

}
document.addEventListener("DOMContentLoaded",function(){
    if (localStorage.getItem("IOThosty")){
        let strHosty = localStorage.getItem("IOThosty");
        if (strHosty)  IOThosty = JSON.parse(strHosty);
        IOTview(IOThosty);
    }
});
  
</script>
</head>
  
<body>


<div id="app" class="wrap">
  <h3>#RADIO</h3> 
  <div id="radios" class="grid"></div>

  <hr />
    <div id="dadaj">
     <div><span>Name:</span> <span><input id="name"/></span></div>
     <div><span>URL:</span>&nbsp;  &nbsp; <span><input id="url"/></span></div>
     <button onclick="dodajRadio(this)">Dodaj</button>
      
    </div>
  
  
    
</div>
</body>
</html>
