<!DOCTYPE html>
<html lang="pl">
<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
   <meta http-equiv="x-ua-compatible" content="ie=edge" />
   <title>EDEK</title>
   <meta name="HandheldFriendly" content="true">
   <meta name="mobile-web-app-capable" content="yes"> 
   <meta name="theme-color" content="#214960">
   <link rel="shortcut icon" type="image/svg+xml" size="any" href="../../img/dom.svg"> 
   <link rel="manifest" href="../../zorro.web.json"> 
   <style>
    .ck.ck-editor__main>.ck-editor__editable:not(.ck-focused) {
        min-height: 5em;
    }
    #editor {min-height: 5em;}
    div.keys {padding:0.5em;}
    div.keys span {padding:0 1em;}
    div.keys button {margin:0.3em;}
    div.keys {padding:0.5em;}
   </style>
   <script src="https://cdn.ckeditor.com/ckeditor5/34.2.0/classic/ckeditor.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
   <script>



        let zapisz=()=>{
            let content = document.querySelector("div.ck-content").innerHTML;
            //console.log(content);
            //saveTextAs(content, "test.html");
            saveTextAs("Hi,This,is,a,CSV,File", "test.csv");
            var blob = new Blob([content], {type: "text/plain;charset=utf-8"});
            saveAs(blob, "edek.html");

            //var blob = new Blob(["Hello, world!"], {type: "text/plain;charset=utf-8"});
            //FileSaver.saveAs(blob, "hello world.txt");            

        }
   </script>

</head>
<body>
    <div class="keys">
        <span>EDEK</span>
        <button onClick="zapisz()">Zapisz</button>
        <button id="saveButton">saveButton</button>
        <button onClick="zapisz()">Zapisz</button>
    </div>
    <div id="editor">
        <p></p>
    </div>
    <script>
        ClassicEditor
            .create( document.querySelector( '#editor' ) )
            .catch( error => {
                console.error( error );
            } );


    document.getElementById("saveButton").addEventListener('click', function() {
        /*var imgUrl = document.querySelector('#target').getAttribute('src');
        var blob = dataURItoBlob(imgUrl, 'image/gif');
        var filename = (document.querySelector('#filename').value || 'gifme') + '.gif';
        saveAs(blob, filename);
        */
        let content = document.querySelector("div.ck-content").innerHTML;
        var blob = new Blob([content], {type: "text/plain;charset=utf-8"});
        saveAs(blob, "edek.html");

    })

    </script>
</body>
</html>