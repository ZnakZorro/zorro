<!DOCTYPE html>
<html lang="pl">
<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
   <meta http-equiv="x-ua-compatible" content="ie=edge" />
   <title>EDEK</title>
   <meta name="HandheldFriendly" content="true">
   <meta name="mobile-web-app-capable" content="yes"> 
   <meta name="theme-color" content="#214960">
   <link rel="shortcut icon" type="image/svg+xml" size="any" href="../../img/dom.svg"> 
   <link rel="manifest" href="../../zorro.web.json"> 
   <style>
    .ck.ck-editor__main>.ck-editor__editable:not(.ck-focused) {
        min-height: 5em;
    }
    #editor {min-height: 5em;}
    div.keys {padding:0.5em;}
    div.keys span {padding:0 1em;}
    div.keys button {margin:0.3em;}
    div.keys {padding:0.5em;}
   </style>
   <script src="https://cdn.ckeditor.com/ckeditor5/34.2.0/classic/ckeditor.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
   <script>




   </script>

</head>
<body>
    <div class="keys">
        <span>EDEK</span>
        
        <button id="saveButton">saveButton</button>
        
    </div>
    <div id="editor">
        <p></p>
    </div>
    <script>
        ClassicEditor
            .create( document.querySelector( '#editor' ) )
            .catch( error => {
                console.error( error );
            } );


    document.getElementById("saveButton").addEventListener('click', function() {
       //let date = (new Date()).toLocaleString().replaceAll(",","").replaceAll(".","-").replaceAll(":","-").replaceAll(" ","-");
       let date = (new Date()).toLocaleString().replace(/[ .,:]/g,"-").replace("--","-");
       let date = (new Date()).toLocaleString().replace(/[^\w\s]| /gi, '-').replace("--","-");;
       
       let nameOfFile = "edek-"+date+".html";
       let filename = prompt("Nazwa pliku",nameOfFile);
       console.log(filename);
       
       
        let content = document.querySelector("div.ck-content").innerHTML;
        var blob = new Blob([content], {type: "text/plain;charset=utf-8"});
        saveAs(blob, filename);

    })

    </script>
</body>
</html>
