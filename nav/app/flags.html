<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>FLAGS</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#fa4">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
    #countrys div {
        display: inline-grid;
        background: #eee;
        margin: 0.25em;
        padding: 0.25em;
        min-height: 8em;
        width: 11em;
    }
    p {margin:0;}
    img {width:160px;max-height:6em;}
</style>
  </head>
<body>
<div id="countrys"></div>
<script>

const logi=(obj)=>{
    let countries = document.querySelector("#countrys");
    let html ="";
    obj.forEach((c,i) => {
        //console.log(i,c.name.common,c.flags.svg,c.car);  
        let car="";
        if (c.car.signs) car = c.car.signs[0];
        html += `<div data-nr="${i}" onClick="show(this)"><p>${i+1}. [${car}] ${c.name.common} <p> <img src="${c.flags.svg}" ></div>`;    
    });
    //console.log(html)
    countries.innerHTML = html;
}

//Async Await

const url ="https://restcountries.com/v3.1/all";

async function fetchData() {
    //console.log(1);
    const response = await fetch(url); 
    const countries = await response.json(); 
    //console.log(countries [64].name.common);
    console.log(countries[60])
    logi(countries)
}

async function fetch1Data(nr) {
    console.log(nr);
    const response = await fetch(url); 
    const countries = await response.json(); 
    //console.log(countries [64].name.common);
    console.log(countries[nr]);
    console.log(JSON.stringify(countries[nr],null,"\t"));
    
}
const show=(ten)=>{
    console.log(ten,ten.dataset)
    fetch1Data(ten.dataset.nr)
}
//console.log(2); 
fetchData();

</script>



</body>
    </html>
    
